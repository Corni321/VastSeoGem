import React, { useState, useEffect } from 'react';
import { createRoot } from 'react-dom/client';
import { Search, Info, BarChart2, Mail, Users, CheckCircle, Star, Award } from 'lucide-react';

const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const navItems = [
    { name: 'Home', page: 'home', icon: 'home' },
    { name: 'About', page: 'about', icon: 'users' },
    { name: 'Services', page: 'services', icon: 'bar-chart-2' },
    { name: 'SEO Tool', page: 'seo-tool', icon: 'search' },
    { name: 'Contact', page: 'contact', icon: 'mail' }
  ];

  const renderIcon = (iconName, className) => {
    switch (iconName) {
      case 'search':
        return <Search className={className} />;
      case 'info':
        return <Info className={className} />;
      case 'bar-chart-2':
        return <BarChart2 className={className} />;
      case 'mail':
        return <Mail className={className} />;
      case 'users':
        return <Users className={className} />;
      case 'check-circle':
        return <CheckCircle className={className} />;
      case 'star':
        return <Star className={className} />;
      case 'award':
        return <Award className={className} />;
      default:
        return null;
    }
  };

  const renderPage = () => {
    switch (currentPage) {
      case 'home':
        return <HomePage />;
      case 'about':
        return <AboutPage />;
      case 'services':
        return <ServicesPage />;
      case 'seo-tool':
        return <SEOToolPage />;
      case 'contact':
        return <ContactPage />;
      default:
        return <HomePage />;
    }
  };

  return (
    <div className="bg-gray-100 text-gray-800 font-sans min-h-screen">
      <header className="bg-white shadow-lg py-4 sticky top-0 z-50">
        <div className="container mx-auto flex flex-col md:flex-row justify-between items-center px-4">
          <div className="flex items-center space-x-2 text-2xl font-bold text-gray-900">
            <img src="https://placehold.co/40x40/000000/FFFFFF?text=VAST" alt="Vast AI Media Logo" className="rounded-full" />
            <span>VastAI Media</span>
          </div>
          <nav className="mt-4 md:mt-0">
            <ul className="flex flex-wrap justify-center space-x-4">
              {navItems.map((item) => (
                <li key={item.page}>
                  <button
                    onClick={() => setCurrentPage(item.page)}
                    className={`flex items-center space-x-2 px-3 py-2 rounded-md font-medium transition-colors duration-200 ${
                      currentPage === item.page
                        ? 'bg-blue-600 text-white'
                        : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    {renderIcon(item.icon, 'w-5 h-5')}
                    <span>{item.name}</span>
                  </button>
                </li>
              ))}
            </ul>
          </nav>
        </div>
      </header>
      <main className="container mx-auto p-4 md:p-8">
        {renderPage()}
      </main>
      <footer className="bg-gray-800 text-white py-6 mt-12">
        <div className="container mx-auto px-6 text-center">
            <p>&copy; 2025 VAST AI Media. All rights reserved.</p>
        </div>
      </footer>
    </div>
  );
};

const HomePage = () => (
  <div className="py-20 md:py-24 text-center">
    <h1 className="text-5xl md:text-6xl font-extrabold text-gray-900 leading-tight">Your Partner in Digital Growth</h1>
    <p className="mt-4 text-xl md:text-2xl text-gray-700 max-w-3xl mx-auto">
      Explore our solutions for AI, SEO, and more.
    </p>
    <div className="mt-8 flex justify-center space-x-4">
      <button onClick={() => window.location.hash = '#services'} className="px-6 py-3 rounded-lg text-white font-semibold bg-blue-600 hover:bg-blue-700 transition duration-300 transform hover:scale-105">
        Learn More
      </button>
      <button onClick={() => window.location.hash = '#contact'} className="px-6 py-3 rounded-lg text-blue-600 font-semibold border-2 border-blue-600 hover:bg-blue-100 transition duration-300 transform hover:scale-105">
        Get Started
      </button>
    </div>
  </div>
);

const AboutPage = () => (
  <section className="py-12 md:py-20 bg-white rounded-xl shadow-lg">
    <div className="container mx-auto px-4 text-center">
      <h2 className="text-4xl font-bold text-gray-900 mb-8">About Us</h2>
      <p className="text-gray-600 mb-12 max-w-3xl mx-auto">
        Vast AI Media is a team of professionals dedicated to empowering businesses with cutting-edge AI-driven solutions and expert digital marketing services. Our mission is to help you achieve unprecedented growth and success in the digital world.
      </p>
      <div className="grid md:grid-cols-3 gap-8">
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <Users size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">Our Mission</h3>
          <p className="text-gray-600">To empower businesses with AI-driven solutions and expert SEO services to boost their business.</p>
        </div>
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <CheckCircle size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">Our Vision</h3>
          <p className="text-gray-600">To be the leading provider of AI and SEO solutions, helping businesses achieve unprecedented growth.</p>
        </div>
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <Star size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">Our Values</h3>
          <p className="text-gray-600">Integrity, Innovation, and Customer Success.</p>
        </div>
      </div>
    </div>
  </section>
);

const ServicesPage = () => (
  <section className="py-12 md:py-20 bg-white rounded-xl shadow-lg">
    <div className="container mx-auto px-4 text-center">
      <h2 className="text-4xl font-bold text-gray-900 mb-8">Our Services</h2>
      <p className="text-gray-600 mb-12 max-w-3xl mx-auto">
        We offer a comprehensive suite of digital marketing and AI services designed to meet your business needs and drive growth.
      </p>
      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <BarChart2 size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">SEO Strategy</h3>
          <p className="text-gray-600">Comprehensive search engine optimization to boost your rankings and visibility.</p>
        </div>
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <Award size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">Content Creation</h3>
          <p className="text-gray-600">High-quality, AI-driven content tailored for your audience and SEO.</p>
        </div>
        <div className="bg-gray-50 p-6 rounded-lg shadow-md">
          <div className="flex justify-center mb-4">
            <Search size={48} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold mb-2 text-gray-800">AI Integration</h3>
          <p className="text-gray-600">Seamless integration of AI tools to automate tasks and improve efficiency.</p>
        </div>
      </div>
    </div>
  </section>
);

const SEOToolPage = () => {
    const [url, setUrl] = useState('');
    const [results, setResults] = useState(null);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    const handleAnalyze = async () => {
        if (!url) {
            setError('Please enter a valid URL.');
            return;
        }

        setLoading(true);
        setResults(null);
        setError(null);

        try {
            const systemPrompt = `Analyze the SEO of a given webpage. Return a JSON object with the following fields: "seoScore" (integer from 0-100), "title" (string), "metaDescription" (string), and "keywords" (a comma-separated string of relevant keywords). The analysis should be based on the provided webpage content.`;
            const userQuery = `Analyze the SEO of this URL: ${url}`;
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            "seoScore": { "type": "NUMBER" },
                            "title": { "type": "STRING" },
                            "metaDescription": { "type": "STRING" },
                            "keywords": { "type": "STRING" }
                        }
                    }
                }
            };

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            const result = await response.json();
            const candidate = result.candidates?.[0];

            if (candidate && candidate.content?.parts?.[0]?.text) {
                const jsonText = candidate.content.parts[0].text;
                const parsedData = JSON.parse(jsonText);
                setResults(parsedData);
            } else {
                throw new Error('No valid response from API.');
            }
        } catch (err) {
            console.error('Error during SEO analysis:', err);
            setError('An error occurred during analysis. Please try a different URL.');
        } finally {
            setLoading(false);
        }
    };

    return (
        <section className="py-12 md:py-20 bg-white rounded-xl shadow-lg">
            <div className="container mx-auto px-4 text-center">
                <h2 className="text-4xl font-bold text-gray-900 mb-4">SEO Analyzer Tool</h2>
                <p className="text-gray-600 mb-8 max-w-xl mx-auto">Enter a URL to get an instant analysis of its key SEO elements.</p>
                <div className="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 max-w-2xl mx-auto">
                    <input
                        type="url"
                        value={url}
                        onChange={(e) => setUrl(e.target.value)}
                        placeholder="Enter website URL (e.g., https://vastaimedia.com)"
                        className="flex-grow w-full md:w-auto px-5 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                    />
                    <button
                        onClick={handleAnalyze}
                        className="w-full md:w-auto px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition duration-300 transform hover:scale-105"
                        disabled={loading}
                    >
                        {loading ? 'Analyzing...' : 'Analyze'}
                    </button>
                </div>

                {loading && (
                    <div className="mt-8 text-center">
                        <div className="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500 mx-auto"></div>
                        <p className="mt-2 text-gray-500">Analyzing... Please wait, this may take a moment.</p>
                    </div>
                )}

                {error && (
                    <div className="mt-8 text-center text-red-500">
                        <p>{error}</p>
                    </div>
                )}

                {results && (
                    <div className="mt-12 text-left max-w-4xl mx-auto bg-gray-50 p-8 rounded-xl shadow-lg">
                        <h3 className="text-2xl font-bold text-gray-900 mb-4">Analysis Results</h3>
                        <div className="space-y-6">
                            <div>
                                <p className="text-lg font-semibold text-gray-700">SEO Score: <span className="font-bold text-blue-600">{results.seoScore}/100</span></p>
                            </div>
                            <div>
                                <p className="text-lg font-semibold text-gray-700">Title: <span className="font-normal text-gray-600">{results.title}</span></p>
                            </div>
                            <div>
                                <p className="text-lg font-semibold text-gray-700">Meta Description: <span className="font-normal text-gray-600">{results.metaDescription}</span></p>
                            </div>
                            <div>
                                <p className="text-lg font-semibold text-gray-700">Keywords: <span className="font-normal text-gray-600">{results.keywords}</span></p>
                            </div>
                        </div>
                    </div>
                )}
            </div>
        </section>
    );
};

const ContactPage = () => (
  <section className="py-12 md:py-20 bg-white rounded-xl shadow-lg">
    <div className="container mx-auto px-4 text-center">
      <h2 className="text-4xl font-bold text-gray-900 mb-8">Contact Us</h2>
      <p className="text-gray-600 mb-12 max-w-3xl mx-auto">
        Feel free to reach out to us with any questions or to get a free consultation.
      </p>
      <form className="max-w-xl mx-auto space-y-4 text-left">
        <label htmlFor="name" className="block font-medium text-gray-700">Name</label>
        <input type="text" id="name" name="name" className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
        
        <label htmlFor="email" className="block font-medium text-gray-700">Email</label>
        <input type="email" id="email" name="email" className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" required />

        <label htmlFor="message" className="block font-medium text-gray-700">Message</label>
        <textarea id="message" name="message" rows="4" className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
        
        <button type="submit" className="w-full px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition duration-300 transform hover:scale-105">
          Send Message
        </button>
      </form>
    </div>
  </section>
);


const container = document.getElementById('root');
if (container) {
    const root = createRoot(container);
    root.render(
        <React.StrictMode>
            <App />
        </React.StrictMode>
    );
}
